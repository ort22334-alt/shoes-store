<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–ö–∞—Ç–∞–ª–æ–≥ –æ–±—É–≤–∏</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f4f4f4; }
        .card { display: flex; gap: 15px; background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; align-items: center; }
        .card img { width: 80px; height: 60px; object-fit: cover; border-radius: 4px; }
        .actions { margin-left: auto; }
        .search { margin-bottom: 20px; }
        .search input { padding: 10px; width: 300px; }
    </style>
</head>
<body>
    <h1>üëü –ö–∞—Ç–∞–ª–æ–≥ –æ–±—É–≤–∏</h1>
    
    <div class="search">
        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –±—Ä–µ–Ω–¥—É..." />
    </div>

    <div id="product-list">
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</p>
    </div>

    <script>
        const productList = document.getElementById("product-list");
        const searchInput = document.getElementById("search-input");

        const loadProducts = async (search = "") => {
            const res = await fetch(`/api/products?search=${encodeURIComponent(search)}`);
            const products = await res.json();
            productList.innerHTML = products.length
                ? products.map(p => `
                    <div class="card">
                        <img src="${p.image_path}" alt="${p.name}" onerror="this.src='static/placeholder.jpg'">
                        <div>
                            <strong>${p.name}</strong><br>
                            <small>${p.brand}</small><br>
                            <b>${p.price} ‚ÇΩ</b>
                        </div>
                        <div class="actions">
                            <button onclick="alert('–¢–æ–≤–∞—Ä ${p.id} –¥–æ–±–∞–≤–ª–µ–Ω')">–ö—É–ø–∏—Ç—å</button>
                        </div>
                    </div>
                `).join("")
                : "<p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>";
        };

        searchInput.addEventListener("input", (e) => {
            loadProducts(e.target.value);
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        loadProducts();
    </script>
</body>
</html>
